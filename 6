#include <iostream>  // Подключение библиотеки для ввода-вывода

// Перечисление (enum class) для типов исключений - безопасный перечислимый тип
enum class Exception
{
	UncorrectValue,   // Некорректное значение
	DontBelieveYou,   // Неправдоподобные данные
	YouNotBornYet,    // Будущая дата рождения
	NegativeNumber,   // Отрицательное число
};

// Пользовательский класс исключения, наследуется от стандартного std::exception
struct CustomException : std::exception  // struct - все публично по умолчанию
{
	// Статический метод для получения текста сообщения по ID исключения
	static const char* get_message_by_id(const Exception id)
	{
		switch (id)  // Оператор выбора по значению перечисления
		{
			case Exception::UncorrectValue: return "Некорректное значение";  // Возврат строки
			case Exception::DontBelieveYou: return "Что-то не верится..";
			case Exception::YouNotBornYet: return "Вы ещё не родились";
			case Exception::NegativeNumber: return "Вы ввели отрицательное число!";
		}

		return "Неизвестное исключение";  // Запасной вариант (на случай добавления нового типа)
	}

	// Конструктор пользовательского исключения
	CustomException(const Exception id)
		: std::exception(get_message_by_id(id))  // Вызов конструктора базового класса с сообщением
	{ }
};

// Функция для демонстрации обработки исключений
static void task_1()  // static - функция видна только в этом файле
{
	int number = 0;  // Переменная для выбора числа (1-3)
	int year = 0;    // Переменная для года рождения

	try  // Блок try - начало защищенного блока кода
	{
		// Запрос числа от пользователя
		std::cout << "Введите число 1, 2 или 3: ";
		std::cin >> number;  // Чтение числа из стандартного ввода

		// Проверка на корректность введенного числа
		if (number < 1 || number > 3)
			throw CustomException(Exception::UncorrectValue);  // Генерация исключения при ошибке

		// Вывод названия числа
		switch (number)  // Оператор выбора по значению числа
		{
			case 1: std::cout << "Один" << std::endl; break;  // Если число = 1
			case 2: std::cout << "Два" << std::endl; break;   // Если число = 2
			case 3: std::cout << "Три" << std::endl; break;   // Если число = 3
		}

		// Запрос года рождения
		std::cout << "Введите год своего рождения: ";
		std::cin >> year;  // Чтение года из стандартного ввода

		// Проверка корректности года рождения
		if (year < 0)                         // Если год отрицательный
			throw CustomException(Exception::NegativeNumber);
		else if (year > 2025)                 // Если год в будущем (предполагаем текущий год 2025)
			throw CustomException(Exception::YouNotBornYet);
		else if (year < 1850)                 // Если год слишком старый (маловероятно)
			throw CustomException(Exception::DontBelieveYou);

		// Если все проверки пройдены успешно
		std::cout << "Спасибо!" << std::endl;
	}
	catch (const CustomException& ex)  // Блок catch - обработка пользовательских исключений
	{
		// Вывод сообщения об ошибке (метод what() из std::exception)
		std::cout << ex.what() << std::endl;  // what() возвращает строку с описанием ошибки
	}
	// Нет блока catch(...) - неперехваченные исключения приведут к аварийному завершению
}

// Главная функция программы
int main()
{
	std::setlocale(LC_ALL, "Russian");  // Установка русской локали для корректного вывода кириллицы

	task_1();  // Вызов основной функции

	return 0;  // Возврат кода успешного завершения программы (0 - успех)
}
